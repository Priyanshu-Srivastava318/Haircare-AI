<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hair Analysis Results - HairCare AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'blue-950': '#172554',
                        'emerald-950': '#022c22',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-blue-950 via-slate-900 to-emerald-950 min-h-screen">
    
    <!-- Navbar -->
    <nav class="fixed top-0 w-full bg-blue-950/80 backdrop-blur-md z-50 border-b border-emerald-900/30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="index.html" class="flex items-center space-x-2">
                    <svg class="w-8 h-8 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                    </svg>
                    <span class="text-xl font-bold bg-gradient-to-r from-blue-400 to-emerald-400 bg-clip-text text-transparent">
                        HairCare AI
                    </span>
                </a>
                
                <div class="flex items-center space-x-6">
                    <a href="diagnosis.html" class="text-gray-300 hover:text-emerald-400 transition-colors">
                        New Analysis
                    </a>
                    <a href="index.html" class="text-gray-300 hover:text-emerald-400 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="pt-24 pb-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">
                    <span class="bg-gradient-to-r from-blue-400 to-emerald-400 bg-clip-text text-transparent">
                        Your Hair Analysis Results
                    </span>
                </h1>
                <p class="text-gray-400 text-lg mb-6">AI-powered root cause analysis with explainable insights</p>
                
                <!-- Mode Toggle -->
                <div class="flex justify-center gap-4">
                    <button onclick="showSampleResults()" id="sampleBtn" class="px-6 py-3 bg-gradient-to-r from-blue-600 to-emerald-600 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105">
                        Sample Analysis
                    </button>
                    <button onclick="showUserResults()" id="userBtn" class="px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-xl transition-all duration-300">
                        Your Analysis
                    </button>
                </div>
            </div>

            <!-- Alert Banner -->
            <div id="alertBanner" class="bg-blue-900/40 border border-blue-700/50 rounded-xl p-4 mb-8">
                <div class="flex items-center space-x-3">
                    <svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <p class="text-gray-300 text-sm">
                        <span class="font-semibold text-blue-400">Viewing:</span> <span id="modeText">Sample demonstration results</span>
                    </p>
                </div>
            </div>

            <!-- User Info Card -->
            <div class="bg-gradient-to-br from-blue-900/40 to-emerald-900/40 backdrop-blur-sm rounded-3xl p-8 border border-emerald-700/30 shadow-2xl mb-8">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-bold text-white mb-2" id="userName">Sample User</h2>
                        <div class="flex flex-wrap gap-4 text-sm text-gray-300">
                            <span id="userAge">Age: 28</span>
                            <span id="userGender">Gender: Male</span>
                            <span id="userConcern">Concern: Hair Fall</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-400 mb-1">Analysis Date</div>
                        <div class="text-white font-semibold" id="analysisDate">Oct 25, 2025</div>
                    </div>
                </div>
            </div>

            <!-- Severity Indicator -->
            <div class="bg-gradient-to-br from-blue-900/40 to-emerald-900/40 backdrop-blur-sm rounded-3xl p-8 border border-emerald-700/30 shadow-2xl mb-8">
                <h3 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <svg class="w-7 h-7 text-emerald-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    Problem Severity
                </h3>
                <div class="flex items-center space-x-4">
                    <div class="flex-1">
                        <div class="w-full bg-slate-800 rounded-full h-4">
                            <div id="severityBar" class="bg-gradient-to-r from-yellow-500 to-orange-500 h-4 rounded-full transition-all duration-1000" style="width: 60%"></div>
                        </div>
                    </div>
                    <div class="text-2xl font-bold text-orange-400" id="severityText">Moderate</div>
                </div>
                <p class="text-gray-400 text-sm mt-3">Based on duration, symptoms, and lifestyle factors</p>
            </div>

            <!-- Charts Section -->
            <div class="grid md:grid-cols-2 gap-8 mb-8">
                
                <!-- Root Cause Breakdown (Pie Chart) -->
                <div class="bg-gradient-to-br from-blue-900/40 to-emerald-900/40 backdrop-blur-sm rounded-3xl p-8 border border-emerald-700/30 shadow-2xl">
                    <h3 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <svg class="w-7 h-7 text-blue-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path>
                        </svg>
                        Root Cause Distribution
                    </h3>
                    <div class="relative h-80">
                        <canvas id="pieChart"></canvas>
                    </div>
                </div>

                <!-- Impact Factors (Bar Chart) -->
                <div class="bg-gradient-to-br from-blue-900/40 to-emerald-900/40 backdrop-blur-sm rounded-3xl p-8 border border-emerald-700/30 shadow-2xl">
                    <h3 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <svg class="w-7 h-7 text-emerald-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"></path>
                        </svg>
                        Impact Analysis
                    </h3>
                    <div class="relative h-80">
                        <canvas id="barChart"></canvas>
                    </div>
                </div>

            </div>

            <!-- Detailed Breakdown -->
            <div class="bg-gradient-to-br from-blue-900/40 to-emerald-900/40 backdrop-blur-sm rounded-3xl p-8 border border-emerald-700/30 shadow-2xl mb-8">
                <h3 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <svg class="w-7 h-7 text-purple-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                    </svg>
                    Detailed Root Cause Analysis
                </h3>

                <div id="detailedBreakdown" class="space-y-6">
                    <!-- Will be populated dynamically -->
                </div>
            </div>

            <!-- AI Explanation -->
            <div class="bg-gradient-to-br from-emerald-900/40 to-blue-900/40 backdrop-blur-sm rounded-3xl p-8 border border-emerald-700/30 shadow-2xl mb-8">
                <h3 class="text-2xl font-bold text-white mb-4 flex items-center">
                    <svg class="w-7 h-7 text-emerald-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                    </svg>
                    AI Insights
                </h3>
                <div class="bg-slate-900/50 rounded-xl p-6 border border-emerald-700/20">
                    <p id="aiExplanation" class="text-gray-300 leading-relaxed text-lg">
                        <!-- Will be populated dynamically -->
                    </p>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-wrap gap-4 justify-center">
                <a href="diagnosis.html" class="px-8 py-4 bg-gradient-to-r from-blue-600 to-emerald-600 hover:from-blue-700 hover:to-emerald-700 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg">
                    Take New Assessment
                </a>
                <button onclick="window.print()" class="px-8 py-4 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-xl transition-all duration-300">
                    Download Report
                </button>
            </div>

        </div>
    </div>
<div class="bg-gradient-to-r from-emerald-600/40 to-blue-600/40 backdrop-blur-sm rounded-3xl p-8 border border-emerald-500/30 shadow-2xl text-center mt-12">
    <h3 class="text-2xl font-bold text-white mb-3">Want Detailed Recommendations?</h3>
    <p class="text-gray-300 mb-6">Get personalized diet plan, product suggestions, and lifestyle modifications</p>
    <a href="payment.html" class="inline-block px-8 py-4 bg-gradient-to-r from-emerald-600 to-blue-600 hover:from-emerald-700 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg">
        Unlock Full Recommendations - â‚¹499
    </a>
</div>
    <script>
        let pieChart, barChart;

        // Sample/Mock Data
        const sampleData = {
            name: "Sample User",
            age: 28,
            gender: "Male",
            concern: "Hair Fall",
            severity: "Moderate",
            severityPercent: 60,
            rootCauses: {
                "High Stress": 40,
                "Poor Sleep": 25,
                "Unhealthy Diet": 20,
                "Genetic Factors": 10,
                "Lifestyle": 5
            },
            explanation: "Based on our AI analysis, your hair fall is primarily triggered by high stress levels (40% impact), which elevates cortisol and affects hair growth cycles. Poor sleep quality (25% impact) disrupts hormonal balance and reduces melatonin production essential for hair health. Your dietary habits (20% impact) show insufficient protein and vitamin intake. Genetic predisposition contributes 10%, while other lifestyle factors account for 5%. Addressing stress management and sleep quality should be your immediate priorities."
        };

        // Initialize with sample data
        window.onload = function() {
            showSampleResults();
        };

        function showSampleResults() {
            document.getElementById('sampleBtn').className = 'px-6 py-3 bg-gradient-to-r from-blue-600 to-emerald-600 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105';
            document.getElementById('userBtn').className = 'px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-xl transition-all duration-300';
            document.getElementById('modeText').textContent = 'Sample demonstration results';
            
            displayResults(sampleData);
        }

        function showUserResults() {
            const userData = localStorage.getItem('hairAnalysisData');
            
            if (!userData) {
                alert('No user data found! Please complete the diagnosis form first.');
                window.location.href = 'diagnosis.html';
                return;
            }

            document.getElementById('sampleBtn').className = 'px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-xl transition-all duration-300';
            document.getElementById('userBtn').className = 'px-6 py-3 bg-gradient-to-r from-blue-600 to-emerald-600 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105';
            document.getElementById('modeText').textContent = 'Your personalized analysis';

            const userDataArray = JSON.parse(userData);
            const latestData = userDataArray[userDataArray.length - 1];
            
            const processedData = processUserData(latestData);
            displayResults(processedData);
        }

        function processUserData(data) {
            // Simple AI logic to calculate impacts
            let stressImpact = 0;
            let sleepImpact = 0;
            let dietImpact = 0;
            let lifestyleImpact = 0;
            let geneticImpact = 0;

            // Stress calculation
            if (data.stressLevel === "Very High") stressImpact = 45;
            else if (data.stressLevel === "High") stressImpact = 35;
            else if (data.stressLevel === "Medium") stressImpact = 20;
            else stressImpact = 10;

            // Sleep calculation
            if (data.sleepDuration === "Less than 4 hours") sleepImpact = 30;
            else if (data.sleepDuration === "4-6 hours") sleepImpact = 25;
            else if (data.sleepDuration === "6-8 hours") sleepImpact = 10;
            else sleepImpact = 5;

            // Diet calculation
            if (data.junkFood === "Daily") dietImpact += 15;
            if (data.proteinIntake === "Low") dietImpact += 10;
            if (data.fruitsVeggies === "Rarely") dietImpact += 10;

            // Lifestyle
            if (data.exerciseFreq === "Never" || data.exerciseFreq === "Rarely") lifestyleImpact += 10;
            if (data.smokingAlcohol === "Yes - Regular") lifestyleImpact += 10;
            if (data.waterIntake === "Less than 2L") lifestyleImpact += 5;

            // Genetic
            if (data.familyHistory === "Yes") geneticImpact = 15;
            else geneticImpact = 5;

            // Normalize to 100%
            const total = stressImpact + sleepImpact + dietImpact + lifestyleImpact + geneticImpact;
            stressImpact = Math.round((stressImpact / total) * 100);
            sleepImpact = Math.round((sleepImpact / total) * 100);
            dietImpact = Math.round((dietImpact / total) * 100);
            lifestyleImpact = Math.round((lifestyleImpact / total) * 100);
            geneticImpact = 100 - (stressImpact + sleepImpact + dietImpact + lifestyleImpact);

            // Calculate severity
            let severityPercent = 30;
            if (data.severity === "Severe" || data.severity === "Very Severe") severityPercent = 80;
            else if (data.severity === "Moderate") severityPercent = 60;
            else severityPercent = 35;

            return {
                name: data.name,
                age: data.age,
                gender: data.gender,
                concern: data.hairConcern,
                severity: data.severity,
                severityPercent: severityPercent,
                rootCauses: {
                    "High Stress": stressImpact,
                    "Poor Sleep": sleepImpact,
                    "Unhealthy Diet": dietImpact,
                    "Lifestyle Factors": lifestyleImpact,
                    "Genetic Factors": geneticImpact
                },
                explanation: generateExplanation(data, stressImpact, sleepImpact, dietImpact)
            };
        }

        function generateExplanation(data, stressImpact, sleepImpact, dietImpact) {
            let explanation = `Based on our AI analysis of your inputs, `;
            
            if (stressImpact > 30) {
                explanation += `your ${data.hairConcern.toLowerCase()} is primarily triggered by high stress levels (${stressImpact}% impact). `;
            }
            
            if (sleepImpact > 20) {
                explanation += `Poor sleep quality (${sleepImpact}% impact) is significantly affecting your hair health by disrupting hormonal balance. `;
            }
            
            if (dietImpact > 20) {
                explanation += `Your dietary habits (${dietImpact}% impact) need improvement - ensure adequate protein, vitamins, and minerals intake. `;
            }
            
            explanation += `Focus on stress management, quality sleep, and a balanced diet for best results.`;
            
            return explanation;
        }

        function displayResults(data) {
            // Update user info
            document.getElementById('userName').textContent = data.name;
            document.getElementById('userAge').textContent = `Age: ${data.age}`;
            document.getElementById('userGender').textContent = `Gender: ${data.gender}`;
            document.getElementById('userConcern').textContent = `Concern: ${data.concern}`;
            document.getElementById('analysisDate').textContent = new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });

            // Update severity
            document.getElementById('severityText').textContent = data.severity;
            document.getElementById('severityBar').style.width = data.severityPercent + '%';
            
            // Update severity bar color
            if (data.severityPercent > 70) {
                document.getElementById('severityBar').className = 'bg-gradient-to-r from-red-500 to-red-600 h-4 rounded-full transition-all duration-1000';
                document.getElementById('severityText').className = 'text-2xl font-bold text-red-400';
            } else if (data.severityPercent > 40) {
                document.getElementById('severityBar').className = 'bg-gradient-to-r from-yellow-500 to-orange-500 h-4 rounded-full transition-all duration-1000';
                document.getElementById('severityText').className = 'text-2xl font-bold text-orange-400';
            } else {
                document.getElementById('severityBar').className = 'bg-gradient-to-r from-green-500 to-emerald-500 h-4 rounded-full transition-all duration-1000';
                document.getElementById('severityText').className = 'text-2xl font-bold text-emerald-400';
            }

            // Update AI explanation
            document.getElementById('aiExplanation').textContent = data.explanation;

            // Update detailed breakdown
            const breakdownHTML = Object.entries(data.rootCauses).map(([cause, impact]) => `
                <div class="bg-slate-900/30 rounded-xl p-6 border border-emerald-700/20">
                    <div class="flex justify-between items-center mb-3">
                        <h4 class="text-lg font-semibold text-white">${cause}</h4>
                        <span class="text-2xl font-bold text-emerald-400">${impact}%</span>
                    </div>
                    <div class="w-full bg-slate-800 rounded-full h-3">
                        <div class="bg-gradient-to-r from-blue-500 to-emerald-500 h-3 rounded-full transition-all duration-1000" style="width: ${impact}%"></div>
                    </div>
                </div>
            `).join('');
            document.getElementById('detailedBreakdown').innerHTML = breakdownHTML;

            // Create charts
            createCharts(data.rootCauses);
        }

        function createCharts(rootCauses) {
            const labels = Object.keys(rootCauses);
            const values = Object.values(rootCauses);
            const colors = [
                'rgba(59, 130, 246, 0.8)',  // Blue
                'rgba(16, 185, 129, 0.8)',  // Emerald
                'rgba(245, 158, 11, 0.8)',  // Amber
                'rgba(239, 68, 68, 0.8)',   // Red
                'rgba(168, 85, 247, 0.8)'   // Purple
            ];

            // Destroy existing charts if they exist
            if (pieChart) pieChart.destroy();
            if (barChart) barChart.destroy();

            // Pie Chart
            const pieCtx = document.getElementById('pieChart').getContext('2d');
            pieChart = new Chart(pieCtx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: values,
                        backgroundColor: colors,
                        borderColor: 'rgba(15, 23, 42, 0.8)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#d1d5db',
                                font: {
                                    size: 12
                                },
                                padding: 15
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed + '%';
                                }
                            }
                        }
                    }
                }
            });

            // Bar Chart
            const barCtx = document.getElementById('barChart').getContext('2d');
            barChart = new Chart(barCtx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Impact %',
                        data: values,
                        backgroundColor: colors,
                        borderColor: colors.map(c => c.replace('0.8', '1')),
                        borderWidth: 2,
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Impact: ' + context.parsed.y + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                color: '#d1d5db',
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            grid: {
                                color: 'rgba(148, 163, 184, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#d1d5db',
                                font: {
                                    size: 11
                                }
                            },
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }
    </script>
   


</body>
</html>